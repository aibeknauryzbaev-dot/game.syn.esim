<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—ã–Ω –µ—Å—ñ–º - –ë”ô–π–≥–µ –û–π—ã–Ω—ã</title>
    <!-- Tailwind CSS (—Å—ã—Ä—Ç“õ—ã –¥–∏–∑–∞–π–Ω “Ø—à—ñ–Ω, –±—ñ—Ä–∞“õ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—Å—ñ–∑ –∂“±–º—ã—Å —ñ—Å—Ç–µ—É—ñ “Ø—à—ñ–Ω –Ω–µ–≥—ñ–∑–≥—ñ —Å—Ç–∏–ª—å–¥–µ—Ä –¥–µ —ñ—à—ñ–Ω–µ –∂–∞–∑—ã–ª“ì–∞–Ω) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0fdf4; /* –ê—à—ã“õ –∂–∞—Å—ã–ª —Ñ–æ–Ω */
            overflow-x: hidden;
            user-select: none;
        }

        .track-bg {
            background-color: #d1fae5;
            background-image: linear-gradient(90deg, transparent 50%, rgba(255,255,255,.5) 50%);
            background-size: 50px 50px;
        }

        .horse {
            transition: left 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: absolute;
            top: 50%;
            transform: translateY(-50%) scaleX(-1); /* –ê—Ç—Ç—ã –æ“£“ì–∞ “õ–∞—Ä–∞—Ç—ã–ø –±“±—Ä—É “Ø—à—ñ–Ω scaleX(-1) “õ–æ—Å—ã–ª–¥—ã */
            font-size: 3rem;
            z-index: 10;
        }

        .finish-line {
            position: absolute;
            right: 5%;
            top: 0;
            bottom: 0;
            width: 15px;
            background: repeating-linear-gradient(
                0deg,
                #000,
                #000 10px,
                #fff 10px,
                #fff 20px
            );
            z-index: 5;
            border-left: 2px solid red;
        }

        .btn-option {
            transition: all 0.1s;
        }
        
        .btn-option:active {
            transform: scale(0.95);
        }

        /* “ö–∞—Ç–µ –∂–∞—É–∞–ø –±–µ—Ä–≥–µ–Ω–¥–µ–≥—ñ –∞–Ω–∏–º–∞—Ü–∏—è */
        .shake-red {
            animation: shake 0.4s;
            background-color: #ef4444 !important; /* “ö—ã–∑—ã–ª —Ç“Ø—Å */
            color: white !important;
            pointer-events: none;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-between py-4">

    <!-- –¢–∞“õ—ã—Ä—ã–ø -->
    <header class="text-center w-full flex-shrink-0">
        <h1 class="text-4xl font-black text-green-700 uppercase tracking-wider drop-shadow-md">–°—ã–Ω –µ—Å—ñ–º - –ë”ô–π–≥–µ üêé</h1>
        <p class="text-gray-600 font-bold mt-2">–ë—ñ—Ä—ñ–Ω—à—ñ –±–æ–ª—ã–ø 10 —Å“±—Ä–∞“õ“õ–∞ –¥“±—Ä—ã—Å –∂–∞—É–∞–ø –±–µ—Ä–≥–µ–Ω –æ–π—ã–Ω—à—ã –∂–µ“£–µ–¥—ñ!</p>
    </header>

    <!-- –ñ–∞—Ä—ã—Å –∂–æ–ª—ã -->
    <div class="w-full max-w-5xl flex-shrink-0 bg-white rounded-xl shadow-lg border-4 border-green-600 overflow-hidden relative mt-4">
        
        <!-- –ú”ô—Ä–µ —Å—ã–∑—ã“ì—ã -->
        <div class="finish-line"></div>

        <!-- –û–π—ã–Ω—à—ã 1 –ñ–æ–ª—ã -->
        <div class="relative w-full h-24 track-bg border-b-4 border-green-700 border-dashed">
            <div id="p1-track-name" class="absolute left-2 top-2 text-sm font-bold text-blue-700 bg-white px-2 rounded shadow">–û–π—ã–Ω—à—ã 1</div>
            <div id="horse1" class="horse" style="left: 2%;">üèá</div>
        </div>

        <!-- –û–π—ã–Ω—à—ã 2 –ñ–æ–ª—ã -->
        <div class="relative w-full h-24 track-bg">
            <div id="p2-track-name" class="absolute left-2 top-2 text-sm font-bold text-red-700 bg-white px-2 rounded shadow">–û–π—ã–Ω—à—ã 2</div>
            <div id="horse2" class="horse" style="left: 2%;">üèá</div>
        </div>
    </div>

    <!-- –°“±—Ä–∞“õ –ø–∞–Ω–µ–ª—ñ -->
    <div class="w-full max-w-4xl flex-shrink-0 bg-yellow-100 border-4 border-yellow-400 rounded-2xl p-6 text-center shadow-xl mt-4 relative min-h-[120px] flex items-center justify-center">
        <h2 id="questionText" class="text-2xl md:text-3xl font-bold text-gray-800">–û–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É “Ø—à—ñ–Ω "–ë–∞—Å—Ç–∞—É" —Ç“Ø–π–º–µ—Å—ñ–Ω –±–∞—Å—ã“£—ã–∑</h2>
        
        <!-- –û–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É / “ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É “õ–∞–±–∞—Ç—ã -->
        <div id="startOverlay" class="absolute inset-0 bg-white/95 rounded-xl flex flex-col items-center justify-center z-20 space-y-4">
            <h3 class="text-xl font-bold text-gray-700 mb-2">–û–π—ã–Ω—à—ã–ª–∞—Ä–¥—ã“£ –∞—Ç—Ç–∞—Ä—ã–Ω –∂–∞–∑—ã“£—ã–∑:</h3>
            <div class="flex gap-4 mb-2">
                <input type="text" id="p1NameInput" placeholder="1-—à—ñ –æ–π—ã–Ω—à—ã –∞—Ç—ã" class="border-2 border-blue-400 rounded-lg px-4 py-2 text-center font-bold text-blue-700 outline-none focus:ring-2 focus:ring-blue-500 w-40 md:w-48">
                <input type="text" id="p2NameInput" placeholder="2-—à—ñ –æ–π—ã–Ω—à—ã –∞—Ç—ã" class="border-2 border-red-400 rounded-lg px-4 py-2 text-center font-bold text-red-700 outline-none focus:ring-2 focus:ring-red-500 w-40 md:w-48">
            </div>
            <button onclick="startGame()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-10 rounded-full text-xl shadow-lg transform transition hover:scale-105">
                –û–π—ã–Ω–¥—ã –ë–∞—Å—Ç–∞—É
            </button>
        </div>
    </div>

    <!-- –û–π—ã–Ω—à—ã–ª–∞—Ä–¥—ã“£ –∂–∞—É–∞–ø –ø–∞–Ω–µ–ª–¥–µ—Ä—ñ -->
    <div class="w-full flex max-w-6xl gap-4 px-4 mt-4 h-full pb-4">
        
        <!-- –û–π—ã–Ω—à—ã 1 (–ö”©–∫) -->
        <div class="flex-1 bg-blue-50 border-4 border-blue-400 rounded-2xl p-4 flex flex-col">
            <h3 class="text-center font-bold text-blue-700 text-xl mb-4"><span id="p1-panel-name">–û–π—ã–Ω—à—ã 1</span> <br><span class="text-sm font-normal">(–ü–µ—Ä–Ω–µ–ª–µ—Ä: 1, 2, 3, 4)</span></h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 flex-1" id="p1-buttons">
                <!-- –ë–∞—Ç—ã—Ä–º–∞–ª–∞—Ä JS –∞—Ä“õ—ã–ª—ã “õ–æ—Å—ã–ª–∞–¥—ã -->
            </div>
        </div>

        <!-- –û–π—ã–Ω—à—ã 2 (“ö—ã–∑—ã–ª) -->
        <div class="flex-1 bg-red-50 border-4 border-red-400 rounded-2xl p-4 flex flex-col">
            <h3 class="text-center font-bold text-red-700 text-xl mb-4"><span id="p2-panel-name">–û–π—ã–Ω—à—ã 2</span> <br><span class="text-sm font-normal">(–ü–µ—Ä–Ω–µ–ª–µ—Ä: 7, 8, 9, 0)</span></h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 flex-1" id="p2-buttons">
                <!-- –ë–∞—Ç—ã—Ä–º–∞–ª–∞—Ä JS –∞—Ä“õ—ã–ª—ã “õ–æ—Å—ã–ª–∞–¥—ã -->
            </div>
        </div>

    </div>

    <!-- –ñ–µ“£—ñ–º–ø–∞–∑–¥—ã —Ö–∞–±–∞—Ä–ª–∞—É –º–æ–¥–∞–ª—å–¥—ñ —Ç–µ—Ä–µ–∑–µ—Å—ñ -->
    <div id="winnerModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50">
        <div class="bg-white p-10 rounded-3xl text-center max-w-lg w-full transform scale-110 shadow-2xl">
            <h1 class="text-6xl mb-4">üèÜ</h1>
            <h2 id="winnerText" class="text-4xl font-black text-gray-800 mb-6">–û–π—ã–Ω—à—ã 1 –ñ–µ“£–¥—ñ!</h2>
            <button onclick="startGame()" class="bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-md w-full">
                “ö–∞–π—Ç–∞ –æ–π–Ω–∞—É
            </button>
        </div>
    </div>

    <script>
        // –°—ã–Ω –µ—Å—ñ–º–≥–µ –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã —Å“±—Ä–∞“õ—Ç–∞—Ä –±–∞–∑–∞—Å—ã (–ë–∞—Å—Ç–∞—É—ã—à —Å—ã–Ω—ã–ø“õ–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω)
        const questionBank = [
            { q: "–°—ã–Ω –µ—Å—ñ–º “õ–∞–Ω–¥–∞–π —Å“±—Ä–∞“õ—Ç–∞—Ä“ì–∞ –∂–∞—É–∞–ø –±–µ—Ä–µ–¥—ñ?", options: ["“ö–∞–Ω–¥–∞–π? “ö–∞–π?", "–ö—ñ–º? –ù–µ?", "–ù–µ —ñ—Å—Ç–µ–¥—ñ?", "“ö–∞–Ω—à–∞? –ù–µ—à–µ?"] },
            { q: "–ó–∞—Ç—Ç—ã“£ —Ç“Ø—Å—ñ–Ω –±—ñ–ª–¥—ñ—Ä–µ—Ç—ñ–Ω —Å”©–∑–¥—ñ —Ç–∞–ø:", options: ["“ö—ã–∑—ã–ª", "–ê–ª–º–∞", "–ñ–µ–¥—ñ", "–û“õ—É—à—ã"] },
            { q: "–ó–∞—Ç—Ç—ã“£ –¥”ô–º—ñ–Ω –±—ñ–ª–¥—ñ—Ä–µ—Ç—ñ–Ω —Å”©–∑–¥—ñ —Ç–∞–ø:", options: ["–¢”ô—Ç—Ç—ñ", "“ö–∞–ª–∞–º", "–°–µ–∫—ñ—Ä–¥—ñ", "“ö–∞–ª–∞"] },
            { q: "¬´“Æ–ª–∫–µ–Ω¬ª —Å”©–∑—ñ–Ω–µ “õ–∞—Ä–∞–º–∞-“õ–∞—Ä—Å—ã (–∞–Ω—Ç–æ–Ω–∏–º) —Å”©–∑–¥—ñ —Ç–∞–ø:", options: ["–ö—ñ—à–∫–µ–Ω—Ç–∞–π", "–ë–∏—ñ–∫", "–ê“õ—ã–ª–¥—ã", "–ñ–∞“õ—Å—ã"] },
            { q: "¬´”ò–¥–µ–º—ñ¬ª —Å”©–∑—ñ–Ω—ñ“£ —Å–∏–Ω–æ–Ω–∏–º—ñ–Ω (–º”ô–Ω–¥–µ—Å —Å”©–∑—ñ–Ω) —Ç–∞–ø:", options: ["–°“±–ª—É", "–ñ–∞–º–∞–Ω", "“∞–∑—ã–Ω", "–¢–æ–ª—ã“õ"] },
            { q: "–¢”©–º–µ–Ω–¥–µ–≥—ñ —Å”©–∑–¥–µ—Ä–¥–µ–Ω —Å—ã–Ω –µ—Å—ñ–º–¥—ñ —Ç–∞–ø:", options: ["–ñ“±–º—Å–∞“õ", "–¢–µ—Ä–µ–∑–µ", "–û–π–Ω–∞–¥—ã", "–ú–µ–∫—Ç–µ–ø"] },
            { q: "–°—ã–Ω –µ—Å—ñ–º –Ω–µ–Ω—ñ –±—ñ–ª–¥—ñ—Ä–µ–¥—ñ?", options: ["–ó–∞—Ç—Ç—ã“£ —Å—ã–Ω—ã–Ω, —Å–∞–ø–∞—Å—ã–Ω", "–ó–∞—Ç—Ç—ã“£ –∞—Ç—ã–Ω", "–ó–∞—Ç—Ç—ã“£ “õ–∏–º—ã–ª—ã–Ω", "–ó–∞—Ç—Ç—ã“£ —Å–∞–Ω—ã–Ω"] },
            { q: "“ö–∞–π “õ–∞—Ç–∞—Ä–¥–∞ —Ç–µ–∫ —Å—ã–Ω –µ—Å—ñ–º–¥–µ—Ä –∂–∞–∑—ã–ª“ì–∞–Ω?", options: ["–°–∞—Ä—ã, –±–∏—ñ–∫, —Å—É—ã“õ", "–ë–∞–ª–∞, “õ—ã–∑, –∞—Ç–∞", "–û“õ—ã–¥—ã, –∂–∞–∑–¥—ã, –∫“Ø–ª–¥—ñ", "–ë—ñ—Ä, –µ–∫—ñ, “Ø—à"] },
            { q: "¬´–ê“õ—ã–ª–¥—ã –±–∞–ª–∞¬ª —Ç—ñ—Ä–∫–µ—Å—ñ–Ω–¥–µ–≥—ñ —Å—ã–Ω –µ—Å—ñ–º “õ–∞–π—Å—ã?", options: ["–ê“õ—ã–ª–¥—ã", "–ë–∞–ª–∞", "–ï–∫–µ—É—ñ –¥–µ —Å—ã–Ω –µ—Å—ñ–º", "–°—ã–Ω –µ—Å—ñ–º –∂–æ“õ"] },
            { q: "–ó–∞—Ç—Ç—ã“£ –ø—ñ—à—ñ–Ω—ñ–Ω –±—ñ–ª–¥—ñ—Ä–µ—Ç—ñ–Ω —Å”©–∑–¥—ñ —Ç–∞–ø:", options: ["–î”©“£–≥–µ–ª–µ–∫", "–ê—â—ã", "–¢–µ–∑", "–°—É—ã“õ"] },
            { q: "¬´“∞–∑—ã–Ω¬ª —Å”©–∑—ñ–Ω–µ “õ–∞—Ä–∞–º–∞-“õ–∞—Ä—Å—ã —Å”©–∑ “õ–∞–Ω–¥–∞–π?", options: ["“ö—ã—Å“õ–∞", "–ë–∏—ñ–∫", "“Æ–ª–∫–µ–Ω", "–ñ—ñ“£—ñ—à–∫–µ"] },
            { q: "¬´–¢”ô—Ç—Ç—ñ –∞–ª–º–∞¬ª —Ç—ñ—Ä–∫–µ—Å—ñ–Ω–¥–µ–≥—ñ —Å—ã–Ω –µ—Å—ñ–º “õ–∞–Ω–¥–∞–π —Å“±—Ä–∞“õ“õ–∞ –∂–∞—É–∞–ø –±–µ—Ä–µ–¥—ñ?", options: ["“ö–∞–Ω–¥–∞–π?", "–ù–µ?", "–ö—ñ–º?", "–ù–µ —ñ—Å—Ç–µ–¥—ñ?"] },
            { q: "¬´“ö–∞—Ä–∞“£“ì—ã¬ª —Å”©–∑—ñ–Ω–µ “õ–∞—Ä–∞–º–∞-“õ–∞—Ä—Å—ã —Å”©–∑–¥—ñ –±–µ–ª–≥—ñ–ª–µ:", options: ["–ñ–∞—Ä—ã“õ", "–¢“Ø–Ω", "–ñ–∞“õ—Å—ã", "“ö–∞—Ä–∞"] },
            { q: "–ê—É–∞ —Ä–∞–π—ã–Ω–∞ “õ–∞—Ç—ã—Å—Ç—ã —Å—ã–Ω –µ—Å—ñ–º–¥—ñ —Ç–∞–ø:", options: ["–°–∞–ª“õ—ã–Ω", "–î–æ–ø", "–ë–∏–ª–µ–¥—ñ", "–ë–µ—Å"] },
            { q: "–°”©–π–ª–µ–º–Ω–µ–Ω —Å—ã–Ω –µ—Å—ñ–º–¥—ñ —Ç–∞–ø: ¬´–ö“Ø–∑–¥–µ —Å–∞—Ä—ã –∂–∞–ø—ã—Ä–∞“õ—Ç–∞—Ä —Ç“Ø—Å–µ–¥—ñ.¬ª", options: ["–°–∞—Ä—ã", "–ö“Ø–∑–¥–µ", "–ñ–∞–ø—ã—Ä–∞“õ—Ç–∞—Ä", "–¢“Ø—Å–µ–¥—ñ"] },
            { q: "–°–∞–ª–º–∞“õ—Ç—ã –±—ñ–ª–¥—ñ—Ä–µ—Ç—ñ–Ω —Å—ã–Ω –µ—Å—ñ–º–¥—ñ —Ç–∞–ø:", options: ["–ê—É—ã—Ä", "–ñ–∞—Å—ã–ª", "–î”ô–º–¥—ñ", "–¢”©—Ä—Ç–±“±—Ä—ã—à"] },
            { q: "–ê–¥–∞–º–Ω—ã“£ –º—ñ–Ω–µ–∑—ñ–Ω –±—ñ–ª–¥—ñ—Ä–µ—Ç—ñ–Ω —Å—ã–Ω –µ—Å—ñ–º–¥—ñ —Ç–∞–ø:", options: ["–ï“£–±–µ–∫“õ–æ—Ä", "–î”©“£–≥–µ–ª–µ–∫", "“ö—ã—à“õ—ã–ª", "–´—Å—Ç—ã“õ"] },
            { q: "“ö–∞–π —Å”©–∑ —Å—ã–Ω –µ—Å—ñ–º –µ–º–µ—Å?", options: ["–ö—ñ—Ç–∞–ø", "–ñ–∞—Ä—ã“õ", "–¢–∞–∑–∞", "–¢–µ—Ä–µ“£"] },
            { q: "¬´“ö–∞–ª—ã“£¬ª —Å”©–∑—ñ–Ω—ñ“£ –∞–Ω—Ç–æ–Ω–∏–º—ñ–Ω —Ç–∞–ø:", options: ["–ñ“±“õ–∞", "–ñ—É–∞–Ω", "–ë–∏—ñ–∫", "–ê–ª–∞—Å–∞"] },
            { q: "–°”©–π–ª–µ–º–¥—ñ —Ç–æ–ª—ã“õ—Ç—ã—Ä: ¬´“ö–æ—è–Ω–Ω—ã“£ “õ“±–ª–∞“ì—ã ...¬ª", options: ["“∞–∑—ã–Ω", "“ö—ã—Å“õ–∞", "–î”©“£–≥–µ–ª–µ–∫", "–ñ–∞—Å—ã–ª"] }
        ];

        let currentQuestions = [];
        let activeQuestion = null;
        let p1Score = 0;
        let p2Score = 0;
        const maxScore = 10;
        let isPlaying = false;
        let p1Name = "–û–π—ã–Ω—à—ã 1";
        let p2Name = "–û–π—ã–Ω—à—ã 2";

        // –û–π—ã–Ω—à—ã–ª–∞—Ä–¥—ã“£ –±“±“ì–∞—Ç—Ç–∞–ª—É –∫“Ø–π—ñ (“õ–∞—Ç–µ –∂–∞—É–∞–ø –±–µ—Ä–≥–µ–Ω–¥–µ)
        let p1Locked = false;
        let p2Locked = false;

        // DOM –≠–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä—ñ
        const questionText = document.getElementById('questionText');
        const p1ButtonsContainer = document.getElementById('p1-buttons');
        const p2ButtonsContainer = document.getElementById('p2-buttons');
        const horse1 = document.getElementById('horse1');
        const horse2 = document.getElementById('horse2');
        const startOverlay = document.getElementById('startOverlay');
        const winnerModal = document.getElementById('winnerModal');
        const winnerText = document.getElementById('winnerText');

        // –ú–∞—Å—Å–∏–≤—Ç—ñ –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä—É —Ñ—É–Ω–∫—Ü–∏—è—Å—ã (–ö–µ–∑–¥–µ–π—Å–æ“õ —Ä–µ—Ç–ø–µ–Ω “õ–æ—é)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // –û–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É
        function startGame() {
            // –û–π—ã–Ω—à—ã–ª–∞—Ä–¥—ã“£ –∞—Ç—Ç–∞—Ä—ã–Ω –æ“õ—É
            const p1Input = document.getElementById('p1NameInput').value.trim();
            const p2Input = document.getElementById('p2NameInput').value.trim();
            p1Name = p1Input !== "" ? p1Input : "–û–π—ã–Ω—à—ã 1";
            p2Name = p2Input !== "" ? p2Input : "–û–π—ã–Ω—à—ã 2";

            // –ê—Ç—Ç–∞—Ä–¥—ã —ç–∫—Ä–∞–Ω“ì–∞ —à—ã“ì–∞—Ä—É
            document.getElementById('p1-track-name').textContent = p1Name;
            document.getElementById('p2-track-name').textContent = p2Name;
            document.getElementById('p1-panel-name').textContent = p1Name;
            document.getElementById('p2-panel-name').textContent = p2Name;

            p1Score = 0;
            p2Score = 0;
            updateHorses();
            isPlaying = true;
            p1Locked = false;
            p2Locked = false;

            startOverlay.classList.add('hidden');
            winnerModal.classList.remove('flex');
            winnerModal.classList.add('hidden');

            // –°“±—Ä–∞“õ—Ç–∞—Ä–¥—ã –∫”©—à—ñ—Ä—ñ–ø –∞–ª—ã–ø, –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä–∞–º—ã–∑
            currentQuestions = shuffleArray([...questionBank]);
            
            loadNextQuestion();
        }

        // –ö–µ–ª–µ—Å—ñ —Å“±—Ä–∞“õ—Ç—ã –∂“Ø–∫—Ç–µ—É
        function loadNextQuestion() {
            if (p1Score >= maxScore || p2Score >= maxScore) {
                endGame();
                return;
            }

            if (currentQuestions.length === 0) {
                // –°“±—Ä–∞“õ —Ç–∞—É—Å—ã–ª—Å–∞, “õ–∞–π—Ç–∞–¥–∞–Ω —Ç–æ–ª—Ç—ã—Ä–∞–º—ã–∑
                currentQuestions = shuffleArray([...questionBank]);
            }

            const qData = currentQuestions.pop();
            
            // –ñ–∞—É–∞–ø—Ç–∞—Ä–¥—ã –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä–∞–º—ã–∑ (–¥“±—Ä—ã—Å –∂–∞—É–∞–ø ”ô—Ä“õ–∞—à–∞–Ω 0-–∏–Ω–¥–µ–∫—Å—Ç–µ —Ç“±—Ä, —Å–æ–Ω—ã —Å–∞“õ—Ç–∞–ø “õ–∞–ª—É “Ø—à—ñ–Ω –æ–±—ä–µ–∫—Ç –∂–∞—Å–∞–π–º—ã–∑)
            let answers = qData.options.map((text, index) => ({
                text: text,
                isCorrect: index === 0
            }));
            answers = shuffleArray(answers);

            activeQuestion = {
                question: qData.q,
                answers: answers
            };

            questionText.textContent = activeQuestion.question;
            renderButtons();
        }

        // –ë–∞—Ç—ã—Ä–º–∞–ª–∞—Ä–¥—ã —ç–∫—Ä–∞–Ω“ì–∞ —à—ã“ì–∞—Ä—É
        function renderButtons() {
            p1ButtonsContainer.innerHTML = '';
            p2ButtonsContainer.innerHTML = '';

            const p1Keys = ['1', '2', '3', '4'];
            const p2Keys = ['7', '8', '9', '0'];

            activeQuestion.answers.forEach((ans, index) => {
                // –û–π—ã–Ω—à—ã 1 –±–∞—Ç—ã—Ä–º–∞–ª–∞—Ä—ã
                const btn1 = document.createElement('button');
                btn1.className = `btn-option bg-white border-2 border-blue-300 hover:bg-blue-100 text-blue-900 font-bold py-3 px-2 rounded-xl text-sm md:text-base shadow-sm relative overflow-hidden`;
                btn1.innerHTML = `<span class="absolute top-1 left-2 text-xs text-blue-400 opacity-70">[${p1Keys[index]}]</span> <span class="block mt-2">${ans.text}</span>`;
                btn1.onclick = () => handleAnswer(1, index, btn1);
                btn1.id = `p1-btn-${index}`;
                p1ButtonsContainer.appendChild(btn1);

                // –û–π—ã–Ω—à—ã 2 –±–∞—Ç—ã—Ä–º–∞–ª–∞—Ä—ã
                const btn2 = document.createElement('button');
                btn2.className = `btn-option bg-white border-2 border-red-300 hover:bg-red-100 text-red-900 font-bold py-3 px-2 rounded-xl text-sm md:text-base shadow-sm relative overflow-hidden`;
                btn2.innerHTML = `<span class="absolute top-1 left-2 text-xs text-red-400 opacity-70">[${p2Keys[index]}]</span> <span class="block mt-2">${ans.text}</span>`;
                btn2.onclick = () => handleAnswer(2, index, btn2);
                btn2.id = `p2-btn-${index}`;
                p2ButtonsContainer.appendChild(btn2);
            });
        }

        // –ñ–∞—É–∞–ø—Ç—ã —Ç–µ–∫—Å–µ—Ä—É
        function handleAnswer(player, index, btnElement) {
            if (!isPlaying) return;
            if (player === 1 && p1Locked) return;
            if (player === 2 && p2Locked) return;

            const isCorrect = activeQuestion.answers[index].isCorrect;

            if (isCorrect) {
                // –î“±—Ä—ã—Å –∂–∞—É–∞–ø!
                if (player === 1) p1Score++;
                if (player === 2) p2Score++;
                
                updateHorses();
                
                // –ï–≥–µ—Ä –±—ñ—Ä–µ—É –∂–µ“£—Å–µ
                if (p1Score >= maxScore || p2Score >= maxScore) {
                    endGame(player);
                } else {
                    // –ö–µ–ª–µ—Å—ñ —Å“±—Ä–∞“õ“õ–∞ ”©—Ç—É
                    loadNextQuestion();
                }
            } else {
                // “ö–∞—Ç–µ –∂–∞—É–∞–ø! –û–π—ã–Ω—à—ã–Ω—ã –±“±“ì–∞—Ç—Ç–∞—É
                lockPlayer(player, btnElement);
            }
        }

        // “ö–∞—Ç–µ –∂–∞—É–∞–ø –±–µ—Ä–≥–µ–Ω –æ–π—ã–Ω—à—ã–Ω—ã 1 —Å–µ–∫—É–Ω–¥“õ–∞ –±“±“ì–∞—Ç—Ç–∞—É
        function lockPlayer(player, btnElement) {
            btnElement.classList.add('shake-red');
            
            if (player === 1) {
                p1Locked = true;
                setTimeout(() => {
                    p1Locked = false;
                    if(btnElement) btnElement.classList.remove('shake-red');
                }, 1000);
            } else {
                p2Locked = true;
                setTimeout(() => {
                    p2Locked = false;
                    if(btnElement) btnElement.classList.remove('shake-red');
                }, 1000);
            }
        }

        // –ê—Ç—Ç–∞—Ä–¥—ã“£ –æ—Ä–Ω—ã–Ω –∂–∞“£–∞—Ä—Ç—É (90% - –±“±–ª –º”ô—Ä–µ —Å—ã–∑—ã“ì—ã)
        function updateHorses() {
            // 1 “õ–∞–¥–∞–º = 9% “±–∑—ã–Ω–¥—ã“õ (10 “õ–∞–¥–∞–º = 90%)
            horse1.style.left = `calc(2% + ${p1Score * 8.8}%)`; 
            horse2.style.left = `calc(2% + ${p2Score * 8.8}%)`;
        }

        // –û–π—ã–Ω–¥—ã –∞—è“õ—Ç–∞—É
        function endGame(winnerPlayer) {
            isPlaying = false;
            winnerModal.classList.remove('hidden');
            winnerModal.classList.add('flex');
            
            if (p1Score >= maxScore && p2Score >= maxScore) {
                winnerText.textContent = "–¢–µ“£ —Ç“Ø—Å—Ç—ñ“£—ñ–∑–¥–µ—Ä! ü§ù";
                winnerText.className = "text-4xl font-black text-gray-800 mb-6";
            } else if (winnerPlayer === 1 || p1Score >= maxScore) {
                winnerText.textContent = `${p1Name} –ñ–µ“£–¥—ñ! ü•á`;
                winnerText.className = "text-4xl font-black text-blue-600 mb-6";
            } else {
                winnerText.textContent = `${p2Name} –ñ–µ“£–¥—ñ! ü•á`;
                winnerText.className = "text-4xl font-black text-red-600 mb-6";
            }
        }

        // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–µ–Ω –±–∞—Å“õ–∞—Ä—É
        document.addEventListener('keydown', (e) => {
            if (!isPlaying) return;

            const key = e.key;
            
            // –û–π—ã–Ω—à—ã 1 –ø–µ—Ä–Ω–µ–ª–µ—Ä—ñ (1, 2, 3, 4)
            if (['1', '2', '3', '4'].includes(key)) {
                const index = parseInt(key) - 1;
                const btn = document.getElementById(`p1-btn-${index}`);
                if(btn) handleAnswer(1, index, btn);
            }
            
            // –û–π—ã–Ω—à—ã 2 –ø–µ—Ä–Ω–µ–ª–µ—Ä—ñ (7, 8, 9, 0)
            if (['7', '8', '9', '0'].includes(key)) {
                let index;
                if (key === '7') index = 0;
                if (key === '8') index = 1;
                if (key === '9') index = 2;
                if (key === '0') index = 3;
                
                const btn = document.getElementById(`p2-btn-${index}`);
                if(btn) handleAnswer(2, index, btn);
            }
        });

    </script>
</body>
</html>